<!DOCTYPE html>
<head>
<?php include_once VIEWS.'inc/head.php'; ?>
</head>

<body>
    <?php include_once VIEWS.'inc/header.php'; ?>
    	<div class="bg">
    		<div class="shopcar-box">
    			<div class="shopcar-tit">
    				<p>购物车</p>
    			</div>
    			<table>
    				<tr>
    					<th width="442">商品</th>
    					<th width="180">单价</th>
    					<th width="200">数量</th>
    					<th width="180">小计</th>
    					<th>操作</th>
    				</tr>
    				<tr>
    					<td>
    						<div class="ex-box1">
	    						<input class="shopcar-input-a" type="checkbox" name="test">
	    						<img src="<?php echo static_file('web/img/img-44.jpg'); ?> " alt="">
	    						<span class="frist-sp">
	    							<p class="top">毛衣男韩版圆领套头修身纯色针织衫复古提花秋冬毛衫青年学生男装</p>
	    							<p class="bot">分类</p>
	    						</span>
    						</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="free">1000</font></p>
	    							<p>积分币：<font class="game">1000</font></p>
	    							<p>商城现金：<font class="money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<div class="shopcar-num">
									<span class="but-cut">-</span>
			    					<input id="num-inp" class="but-num" value="1" type="text">
			    					<span class="but-add">+</span>
								</div>
							</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="j-free">1000</font></p>
	    							<p>积分币：<font class="j-game">1000</font></p>
	    							<p>商城现金：<font class="j-money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box2">
	    						<span class="hide">删除</span>
	    					</div>
    					</td>
    				</tr>
    				<tr>
    					<td>
    						<div class="ex-box1">
	    						<input class="shopcar-input-a" type="checkbox" name="test">
	    						<img src="<?php echo static_file('web/img/img-44.jpg'); ?> " alt="">
	    						<span class="frist-sp">
	    							<p class="top">毛衣男韩版圆领套头修身纯色针织衫复古提花秋冬毛衫青年学生男装</p>
	    							<p class="bot">分类</p>
	    						</span>
    						</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="free">1000</font></p>
	    							<p>积分币：<font class="game">1000</font></p>
	    							<p>商城现金：<font class="money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<div class="shopcar-num">
									<span class="but-cut">-</span>
			    					<input id="num-inp" class="but-num" value="1" type="text">
			    					<span class="but-add">+</span>
								</div>
							</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="j-free">1000</font></p>
	    							<p>积分币：<font class="j-game">1000</font></p>
	    							<p>商城现金：<font class="j-money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box2">
	    						<span class="hide">删除</span>
	    					</div>
    					</td>
    				</tr>
    				<tr>
    					<td>
    						<div class="ex-box1">
	    						<input class="shopcar-input-a" type="checkbox" name="test">
	    						<img src="<?php echo static_file('web/img/img-44.jpg'); ?> " alt="">
	    						<span class="frist-sp">
	    							<p class="top">毛衣男韩版圆领套头修身纯色针织衫复古提花秋冬毛衫青年学生男装</p>
	    							<p class="bot">分类</p>
	    						</span>
    						</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="free">1000</font></p>
	    							<p>积分币：<font class="game">1000</font></p>
	    							<p>商城现金：<font class="money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<div class="shopcar-num">
									<span class="but-cut">-</span>
			    					<input id="num-inp" class="but-num" value="1" type="text">
			    					<span class="but-add">+</span>
								</div>
							</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="j-free">1000</font></p>
	    							<p>积分币：<font class="j-game">1000</font></p>
	    							<p>商城现金：<font class="j-money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box2">
	    						<span class="hide">删除</span>
	    					</div>
    					</td>
    				</tr>
    				<tr>
    					<td>
    						<div class="ex-box1">
	    						<input class="shopcar-input-a" type="checkbox" name="test">
	    						<img src="<?php echo static_file('web/img/img-44.jpg'); ?> " alt="">
	    						<span class="frist-sp">
	    							<p class="top">毛衣男韩版圆领套头修身纯色针织衫复古提花秋冬毛衫青年学生男装</p>
	    							<p class="bot">分类</p>
	    						</span>
    						</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="free">1000</font></p>
	    							<p>积分币：<font class="game">1000</font></p>
	    							<p>商城现金：<font class="money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<div class="shopcar-num">
									<span class="but-cut">-</span>
			    					<input id="num-inp" class="but-num" value="1" type="text">
			    					<span class="but-add">+</span>
								</div>
							</div>
    					</td>
    					<td>
	    					<div class="ex-box">
	    						<span class="second-sp">
	    							<p>免费积分：<font class="j-free">1000</font></p>
	    							<p>积分币：<font class="j-game">1000</font></p>
	    							<p>商城现金：<font class="j-money">10000</font></p>
	    						</span>
	    					</div>
    					</td>
    					<td>
	    					<div class="ex-box2">
	    						<span class="hide">删除</span>
	    					</div>
    					</td>
    				</tr>
    			</table>
    			<div class="end-box">
    				<div class="fl">
    					<div class="fll">
    						<input  class="all-input" type="checkbox" name="test" value="" onclick="if(this.checked==true) { checkAll('test'); } else { clearAll('test'); }" / >
    						<a class="end-all" href="">全选</a>
    					</div>
    					<a class="end-hide" href="javascript:;">删除</a>
    				</div>
    				
    				<div class="fr">
    					<div class="thr-box">
    						<ul>
    							<li>免费积分：<font class="end-free">0</font></li>
    							<li>积分币：<font class="end-game">0</font></li>
    							<li>商城现金：<font class="end-money">0</font></li>
    						</ul>
    					</div>
    					<div class="zzz">商品总计:</div>
    				</div>
    			</div>	
    			<div class="two-box">
    				<input value="结 算" type="submit">
    				<a href="">继续购物</a>
    			</div>	
    		</div>
    			
    		</div>
    	</div>
    <?php include_once VIEWS.'inc/footer.php'; ?>
    <?php echo static_file('web/js/all.js'); ?>
</body>
<script>
	$(function(){
		alert(0)
		$(".shopcar-num .but-add").click(function(){
        	var n = parseInt($(this).parent().find(".but-num").val());
        	$(this).siblings(".but-num").val(n+1);

        	var thisn = $(this).siblings(".but-num").val();
        	
        	var free = $(this).parents("td").siblings("td").find('.free').html();
        	var game = $(this).parents("td").siblings("td").find('.game').html();
        	var money = $(this).parents("td").siblings("td").find('.money').html();

        	var g_free = parseInt(free * thisn);
        	$(this).parents("td").siblings("td").find('.j-free').html(g_free);

        	var g_game = parseInt(game * thisn);
        	$(this).parents("td").siblings("td").find('.j-game').html(g_game);

        	var g_money = parseInt(money * thisn);
        	$(this).parents("td").siblings("td").find('.j-money').html(g_money);

        	limit()        	
    	});
    	//减 
	    $(".shopcar-num .but-cut").click(function(){
	        var n = parseInt($(this).parent().find(".but-num").val());

	        if(n > 1){
	         	$(this).siblings('.but-num').val(n-1);
	        }else{
	         	$(this).siblings('.but-num').val(1);
	        } 

			var nn = n-1
    		
			if (nn >=1) {
				var free = $(this).parents("td").siblings("td").find('.free').html();
	    		var game = $(this).parents("td").siblings("td").find('.game').html();
	    		var money = $(this).parents("td").siblings("td").find('.money').html();

	    		var g_free = parseInt(free * nn);
	        	$(this).parents("td").siblings("td").find('.j-free').html(g_free);
	        	
	        	var g_game = parseInt(game * nn);
	        	$(this).parents("td").siblings("td").find('.j-game').html(g_game);

	        	var g_money = parseInt(money * nn);
	        	$(this).parents("td").siblings("td").find('.j-money').html(g_money);
			
				}
				else{

				} 

				limit()				
	    })

	    $(".shopcar-box table .hide").click(function(){
	    	$(this).parents("tr").remove();
	    	limit();
	    });

	    $(".shopcar-box table tr .shopcar-input-a").click(function(){
	    	limit();
	    });

	    $(".fll .all-input").click(function(){
	    	limit();
	    })

	    function limit() {
	   		var _zgame=0 , _zmoney = 0 ,_zfree = 0;
    		$(".shopcar-box table tr").each(function(){
    		var n_this = $(this);
    		
    		if (n_this.find('input[type="checkbox"]').is(":checked")) {
    			var end_free =  parseInt(n_this.find('.j-free').html()); //件数
    			_zfree += end_free;
    			
    			
    			var end_game =  parseInt(n_this.find('.j-game').html()); //件数
    			_zgame += end_game
				

    			var end_money =  parseInt(n_this.find('.j-money').html()); //件数
    			_zmoney += end_money		
    		}
    			})
    		$(".end-free").html(_zfree);
    		$(".end-game").html(_zgame);
    		$(".end-money").html(_zmoney);
    	}

    	$(".shopcar-box table tr").each(function(){
    		var n_this = $(this);
	    	$(".end-hide").click(function(){
	    		if (n_this.find('input[type="checkbox"]').is(":checked")) {
					n_this.remove();
	    		}else{

	    		}
	    		limit();
	    	})
    	})

	})


	
	
	    	
</script>
</html>